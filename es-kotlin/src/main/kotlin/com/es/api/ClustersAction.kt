package com.es.api

/**
 * Elasticsearch Console Api
 * @author changgq
 */

import com.es.api.dto.ElasticsearchDto
import com.es.common.ApiResponse
import org.elasticsearch.action.admin.cluster.settings.ClusterUpdateSettingsRequest
import org.elasticsearch.action.admin.indices.delete.DeleteIndexRequest
import org.elasticsearch.action.delete.DeleteRequest
import org.elasticsearch.action.index.IndexRequest
import org.elasticsearch.action.support.IndicesOptions
import org.elasticsearch.client.RestHighLevelClient
import org.elasticsearch.common.xcontent.XContentHelper
import org.elasticsearch.common.xcontent.XContentType
import org.elasticsearch.index.query.QueryBuilders
import org.elasticsearch.index.reindex.DeleteByQueryRequest
import org.elasticsearch.index.reindex.DeleteByQueryRequestBuilder
import org.elasticsearch.search.builder.SearchSourceBuilder
import org.springframework.web.bind.annotation.*
import java.util.*
import kotlin.system.measureTimeMillis


/**
 * 集群管理
 */
@RestController
@RequestMapping("/cluster")
class ClustersAction(highLevelClient: RestHighLevelClient) : BaseAction(highLevelClient) {
    /**
     * @api {GET} /api/cluster/info 1_集群基本信息
     * @apiGroup cluster
     * @apiVersion 1.0.0
     * @apiDescription 集群基本信息
     * @apiSuccess {ApiResponse} apiResponse Json格式返回响应结果
     * @apiSuccessExample {json} 返回样例:
     * {"data":[{"cluster_name":"eslogs","cluster_uuid":"03VfExIgRbGSp5tcW8jsxQ","nodeName":"master","version":"6.2.4","build":"[ccec39f][2018-04-12T20:37:28.497551Z]"}],"response_time":71,"status_code":200,"message":"OK"}
     */
    @GetMapping("/info")
    fun info(): ApiResponse {
        var esDto = ElasticsearchDto()
        val elapsed_time_ = measureTimeMillis {
            val res = highLevelClient.info()
            esDto.cluster_name = res.clusterName.value()
            esDto.cluster_uuid = res.clusterUuid
            esDto.nodeName = res.nodeName
            esDto.version = res.version.toString()
            esDto.build = res.build.toString()
        }
        return ApiResponse(listOf(esDto), elapsed_time_)
    }

    /**
     * @api {GET} /api/cluster/health 2_集群健康状况
     * @apiGroup cluster
     * @apiVersion 1.0.0
     * @apiDescription 集群健康状况
     * @apiSuccess {ApiResponse} apiResponse Json格式返回响应结果
     * @apiSuccessExample {json} 返回样例:
     * {"data":[{"cluster_name":"eslogs","status":"green","timed_out":false,"number_of_nodes":3,"number_of_data_nodes":3,"active_primary_shards":30,"active_shards":60,"relocating_shards":0,"initializing_shards":0,"unassigned_shards":0,"delayed_unassigned_shards":0,"number_of_pending_tasks":0,"number_of_in_flight_fetch":0,"task_max_waiting_in_queue_millis":0,"active_shards_percent_as_number":100.0}],"response_time":61,"status_code":200,"message":"OK"}
     */
    @GetMapping(value = "/health")
    fun health(): ApiResponse {
        val parameters = Collections.singletonMap("wait_for_status", "green")
        return urlGet("GET", "/_cluster/health", params = parameters)
    }

    /**
     * @api {GET} /api/cluster/state 3_集群状态
     * @apiGroup cluster
     * @apiVersion 1.0.0
     * @apiDescription 集群状态
     * @apiSuccess {ApiResponse} apiResponse Json格式返回响应结果
     * @apiSuccessExample {json} 返回样例:
     * {"data":[{"cluster_name":"eslogs","compressed_size_in_bytes":5013,"version":203,"state_uuid":"f_GyDjwWTIazZlPUb58A5A","master_node":"V9fffC08SYiT8V3iil7kMQ","blocks":{},"nodes":{"wgvUHm1mTvSsKnHXzLO9Jw":{"name":"master","ephemeral_id":"rLEM-WIfT76nUheiu6U8lg","transport_address":"192.168.0.39:9300","attributes":{}},"C2C5BLVTQnuxKuiVbjstzg":{"name":"node2","ephemeral_id":"ZOx9XbH_SmeB-Tnk-5F2_Q","transport_address":"192.168.0.92:9300","attributes":{}},"V9fffC08SYiT8V3iil7kMQ":{"name":"node3","ephemeral_id":"4hbjehs6QdGq-LzQOdqtZA","transport_address":"192.168.0.188:9300","attributes":{}}},"metadata":{"cluster_uuid":"03VfExIgRbGSp5tcW8jsxQ","templates":{},"indices":{"admin":{"state":"open","settings":{"index":{"creation_date":"1514432609682","number_of_shards":"5","number_of_replicas":"1","uuid":"k7z0BHjgQLCB-R2UdBKjiQ","version":{"created":"5060499","upgraded":"6020499"},"provided_name":"admin"}},"mappings":{"ADMINLOG":{"dynamic_templates":[{"string_as_keyword":{"mapping":{"type":"keyword"},"match_mapping_type":"string","match":"keyword_*"}},{"string_as_date":{"mapping":{"format":"dd/MMM/yyyy:HH:mm:ss Z||yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis","type":"date"},"match_mapping_type":"string","match":"date_*"}},{"string_as_long":{"mapping":{"type":"long"},"match_mapping_type":"string","match":"long_*"}},{"string_as_integer":{"mapping":{"type":"integer"},"match_mapping_type":"string","match":"integer_*"}},{"string_as_short":{"mapping":{"type":"short"},"match_mapping_type":"string","match":"short_*"}},{"string_as_float":{"mapping":{"type":"float"},"match_mapping_type":"string","match":"float_*"}},{"string_as_text":{"mapping":{"type":"text"},"match_mapping_type":"string","match":"text_*"}}],"_all":{"enabled":true},"properties":{"log_timestamp":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"user_name":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"log_info":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"ip_address":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"message":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"type":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"keyword_log_level":{"type":"keyword"},"tags":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"path":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"@timestamp":{"type":"date"},"port":{"type":"long"},"user_id":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"keyword_user_auth":{"type":"keyword"},"mac_address":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"@version":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"host":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"operation":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}}}}},"aliases":[],"primary_terms":{"0":39,"1":39,"2":39,"3":39,"4":39},"in_sync_allocations":{"2":["JKatzopuQA2xGEEd2n3pEQ","Dgi8s7WxSz2oA4CUKYpkIw"],"3":["sLWxuI75SjCN4VA8ZLhwpw","Os8GyhUMSAyrpq8pQDnZ6A"],"1":["xrXSYdvhSt-N4AR3CdNcgw","3UN0Tvr2SzGxCqLt-X22Fg"],"4":["cAwPEU83QtiEJV_SaDVHtQ","EcQ57ECWQOig2unnejzaPQ"],"0":["5qKqLvrqQj-DwjJkhFZT2w","SakRRTBKTZejGlneB89Y5g"]}},"test_eslogsdemo_index1":{"state":"open","settings":{"index":{"refresh_interval":"-1","number_of_shards":"5","provided_name":"test_eslogsdemo_index1","creation_date":"1526026966913","store":{"type":"fs"},"number_of_replicas":"1","uuid":"K_WsbIaLT_OA_AVlks14Wg","version":{"created":"6020499"}}},"mappings":{"person":{"properties":{"address":{"type":"geo_point"},"phone":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"name":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"id":{"type":"long"}}}},"aliases":[],"primary_terms":{"0":2,"1":1,"2":2,"3":1,"4":2},"in_sync_allocations":{"2":["oWRP7mQ8TziqR58gVPPTmA","KJ4sKrYbRuyA5SSwMk9AkA"],"3":["E3y_G5InRauyOANbwpbG1g","vIsIAWxFSNi1-RgpdBE9hw"],"1":["Dl2OWwrzToegRD7ulPnApg","pDxGQ2BEQlyUabSl-qzytA"],"4":["F40hizJvRD-dnIOULEE-aA","pbO2XI5-Tyy-tJz0bkkfxw"],"0":["QnR3_ig9SqCYEzHNlsKQUA","ivnlugNmRn6d4VIQmxvHew"]}},"res":{"state":"open","settings":{"index":{"creation_date":"1514432609944","number_of_shards":"5","number_of_replicas":"1","uuid":"LX2NeWZUTyWowVpSE9Agvg","version":{"created":"5060499","upgraded":"6020499"},"provided_name":"res"}},"mappings":{"RESLOG":{"dynamic_templates":[{"string_as_keyword":{"mapping":{"type":"keyword"},"match_mapping_type":"string","match":"keyword_*"}},{"string_as_date":{"mapping":{"format":"dd/MMM/yyyy:HH:mm:ss Z||yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis","type":"date"},"match_mapping_type":"string","match":"date_*"}},{"string_as_long":{"mapping":{"type":"long"},"match_mapping_type":"string","match":"long_*"}},{"string_as_integer":{"mapping":{"type":"integer"},"match_mapping_type":"string","match":"integer_*"}},{"string_as_short":{"mapping":{"type":"short"},"match_mapping_type":"string","match":"short_*"}},{"string_as_float":{"mapping":{"type":"float"},"match_mapping_type":"string","match":"float_*"}},{"string_as_text":{"mapping":{"type":"text"},"match_mapping_type":"string","match":"text_*"}}],"_all":{"enabled":true},"properties":{"log_timestamp":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"app_type":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"user_name":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"short_request_count":{"type":"short"},"type":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"keyword_log_level":{"type":"keyword"},"request_referer":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"path":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"browser_info":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"@version":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"host":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"long_total_traffic":{"type":"long"},"user_group":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"keyword_file_format":{"type":"keyword"},"keyword_status":{"type":"keyword"},"session_id":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"ip_address":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"message":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"uri":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"float_response_time":{"type":"float"},"tags":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"long_uplink_traffic":{"type":"long"},"@timestamp":{"type":"date"},"user_id":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"resource_name":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"long_downlink_traffic":{"type":"long"},"url_http":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}}}}},"aliases":[],"primary_terms":{"0":50,"1":47,"2":51,"3":51,"4":47},"in_sync_allocations":{"2":["7mv5oUi2TZ-sb8I-Tu83aA","cvxpWPL1RMSz9UwEm2vUgg"],"3":["duyQ2CBkSJy_VpVdmnipUA","Q_0QGFxTRAuxC4cmUVPJlg"],"1":["Izh1ZzFuQ8GnwfqKnHrYuw","kH7zR-H5RZu75haoYJX1Bw"],"4":["1kD30uXOQPmJFwqYeOW8Ig","PUyBSRr3TpalaLQZOUKUGQ"],"0":["MKItLbBXToqzLnUR9a7Qgw","DRX22nCoRxuz32LPe2bmLw"]}},"user":{"state":"open","settings":{"index":{"creation_date":"1514432609836","number_of_shards":"5","number_of_replicas":"1","uuid":"hOa40GaBSzGkOfCt2hpVcQ","version":{"created":"5060499","upgraded":"6020499"},"provided_name":"user"}},"mappings":{"USERLOG":{"dynamic_templates":[{"string_as_keyword":{"mapping":{"type":"keyword"},"match_mapping_type":"string","match":"keyword_*"}},{"string_as_date":{"mapping":{"format":"dd/MMM/yyyy:HH:mm:ss Z||yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis","type":"date"},"match_mapping_type":"string","match":"date_*"}},{"string_as_long":{"mapping":{"type":"long"},"match_mapping_type":"string","match":"long_*"}},{"string_as_integer":{"mapping":{"type":"integer"},"match_mapping_type":"string","match":"integer_*"}},{"string_as_short":{"mapping":{"type":"short"},"match_mapping_type":"string","match":"short_*"}},{"string_as_float":{"mapping":{"type":"float"},"match_mapping_type":"string","match":"float_*"}},{"string_as_text":{"mapping":{"type":"text"},"match_mapping_type":"string","match":"text_*"}}],"_all":{"enabled":true},"properties":{"log_timestamp":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"certificate_server":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"client_info":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"user_group":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"link_interface":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"user_name":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"keyword_status":{"type":"keyword"},"log_info":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"device_type":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"ip_address":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"message":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"type":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"device_os":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"keyword_log_level":{"type":"keyword"},"tags":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"@timestamp":{"type":"date"},"port":{"type":"long"},"user_id":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"keyword_user_auth":{"type":"keyword"},"mac_address":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"@version":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"host":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"operation":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}}}}},"aliases":[],"primary_terms":{"0":39,"1":39,"2":39,"3":39,"4":39},"in_sync_allocations":{"2":["EUMCJQEMSS-ZunCOkj-0Bg","nutVbcgpQNak2HFdwWuGcQ"],"3":["A-9H07HSTOuPEk49xwkUIQ","4IL1OvvaRS-t4gQr3bN-PQ"],"1":["NQtAX8yTQh2lD1kQHIcYYA","rQ1p6vqOQwW0eXrw2BaKVA"],"4":["9NiM_-3DRV6N0_ty_WuEUA","TqToRwAkTAOnKCoKZpG59g"],"0":["Ee3WoHUTRFSP7WYxzZKKGg","Qzwt2olURNS2HCVXpGRsAw"]}},".elastichq":{"state":"open","settings":{"index":{"creation_date":"1526635210821","number_of_shards":"5","number_of_replicas":"1","uuid":"Wy9sCE-qThuZpYa8EueZJg","version":{"created":"6020499"},"provided_name":".elastichq"}},"mappings":{"data":{"properties":{"historic_days_to_store":{"type":"long"},"websocket_interval":{"type":"long"},"store_metrics":{"type":"boolean"},"historic_poll_interval":{"type":"long"},"doc_type":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"doc_id":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"index_name":{"type":"text","fields":{"keyword":{"ignore_above":256,"type":"keyword"}}},"version":{"type":"long"}}}},"aliases":[],"primary_terms":{"0":1,"1":1,"2":1,"3":1,"4":1},"in_sync_allocations":{"2":["GuWPLlSkS46XTNVgTFjAMA","vZxiopRNTe6Y0_AfkhzG_A"],"3":["1Oz9MY6tSaKdLBFiULmb6Q","8vxkeoqfQ1O6WJEK2BIvlw"],"1":["zmRNhq8qQCiT4mi-L0__BA","UAiMrJv9Se-zDjBJxx4ztQ"],"4":["AsE3sHeESxa6PWuUpcsVKw","QknNgj2vQr-4KYXVJuke2A"],"0":["hkVY5Z9AQL6bIbVqn7aamw","I1EsMqsrT6GdznSLg8ZelA"]}},"system":{"state":"open","settings":{"index":{"creation_date":"1514432609527","number_of_shards":"5","number_of_replicas":"1","uuid":"c3tOLSnPSpSjuqDCmBz8Dg","version":{"created":"5060499","upgraded":"6020499"},"provided_name":"system"}},"mappings":{"SYSTEMLOG":{"dynamic_templates":[{"string_as_keyword":{"mapping":{"type":"keyword"},"match_mapping_type":"string","match":"keyword_*"}},{"string_as_date":{"mapping":{"format":"dd/MMM/yyyy:HH:mm:ss Z||yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis","type":"date"},"match_mapping_type":"string","match":"date_*"}},{"string_as_long":{"mapping":{"type":"long"},"match_mapping_type":"string","match":"long_*"}},{"string_as_integer":{"mapping":{"type":"integer"},"match_mapping_type":"string","match":"integer_*"}},{"string_as_short":{"mapping":{"type":"short"},"match_mapping_type":"string","match":"short_*"}},{"string_as_float":{"mapping":{"type":"float"},"match_mapping_type":"string","match":"float_*"}},{"string_as_text":{"mapping":{"type":"text"},"match_mapping_type":"string","match":"text_*"}}],"_all":{"enabled":true}}},"aliases":[],"primary_terms":{"0":39,"1":39,"2":39,"3":39,"4":39},"in_sync_allocations":{"2":["qtmt37DZSfewu3OwO5eFbA","EtmRnX4RR4eqjXtykZH3wg"],"3":["idZQhjMxS5KyKz6iS6hcZQ","Uzp3EKBgRbm0m2xQdJcXcA"],"1":["0Dp7wW1OQP2YHeN0cB6N2Q","FjHdA1AVSDyuJFeS6BC6UQ"],"4":["4auNvScMRSeiFxrVtB9AVg","uk5yv0k0Ql-nYOB4Oawmpw"],"0":["kJ29T9kdSxWdF8V6QmU3gQ","V20R1M25T9eG0XMoAFKWNQ"]}}},"index-graveyard":{"tombstones":[{"index":{"index_name":"test_eslogsdemo_index1","index_uuid":"4K2iZdGtTv-jsO1A5OtfpQ"},"delete_date_in_millis":1526026948222},{"index":{"index_name":"metricbeat-2018.05.09","index_uuid":"vLLcEZAwR9-JomJ7yroldQ"},"delete_date_in_millis":1526375614112},{"index":{"index_name":"metricbeat-2018.05.10","index_uuid":"3AIOemMdTlS6F4-VHLMpMw"},"delete_date_in_millis":1526375614112},{"index":{"index_name":"metricbeat-2018.05.11","index_uuid":"6MjfqrKDR0O8dZEVvLlhAg"},"delete_date_in_millis":1526375614112},{"index":{"index_name":"metricbeat-2018.05.14","index_uuid":"4VnRaIDPR3Kh37rr43rRJQ"},"delete_date_in_millis":1526375614112},{"index":{"index_name":"metricbeat-2018.05.15","index_uuid":"-Ts4f_EGQFGZ10Eck7mIBQ"},"delete_date_in_millis":1526375614112},{"index":{"index_name":".elastichq","index_uuid":"05hVlK_GSAiKO-5R5LSEAA"},"delete_date_in_millis":1526635208370}]}},"routing_table":{"indices":{"admin":{"shards":{"2":[{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":2,"index":"admin","allocation_id":{"id":"JKatzopuQA2xGEEd2n3pEQ"}},{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":2,"index":"admin","allocation_id":{"id":"Dgi8s7WxSz2oA4CUKYpkIw"}}],"3":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":3,"index":"admin","allocation_id":{"id":"sLWxuI75SjCN4VA8ZLhwpw"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":3,"index":"admin","allocation_id":{"id":"Os8GyhUMSAyrpq8pQDnZ6A"}}],"1":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":1,"index":"admin","allocation_id":{"id":"3UN0Tvr2SzGxCqLt-X22Fg"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":1,"index":"admin","allocation_id":{"id":"xrXSYdvhSt-N4AR3CdNcgw"}}],"4":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":4,"index":"admin","allocation_id":{"id":"EcQ57ECWQOig2unnejzaPQ"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":4,"index":"admin","allocation_id":{"id":"cAwPEU83QtiEJV_SaDVHtQ"}}],"0":[{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":0,"index":"admin","allocation_id":{"id":"SakRRTBKTZejGlneB89Y5g"}},{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":0,"index":"admin","allocation_id":{"id":"5qKqLvrqQj-DwjJkhFZT2w"}}]}},"test_eslogsdemo_index1":{"shards":{"2":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":2,"index":"test_eslogsdemo_index1","allocation_id":{"id":"oWRP7mQ8TziqR58gVPPTmA"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":2,"index":"test_eslogsdemo_index1","allocation_id":{"id":"KJ4sKrYbRuyA5SSwMk9AkA"}}],"3":[{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":3,"index":"test_eslogsdemo_index1","allocation_id":{"id":"vIsIAWxFSNi1-RgpdBE9hw"}},{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":3,"index":"test_eslogsdemo_index1","allocation_id":{"id":"E3y_G5InRauyOANbwpbG1g"}}],"1":[{"state":"STARTED","primary":false,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":1,"index":"test_eslogsdemo_index1","allocation_id":{"id":"Dl2OWwrzToegRD7ulPnApg"}},{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":1,"index":"test_eslogsdemo_index1","allocation_id":{"id":"pDxGQ2BEQlyUabSl-qzytA"}}],"4":[{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":4,"index":"test_eslogsdemo_index1","allocation_id":{"id":"pbO2XI5-Tyy-tJz0bkkfxw"}},{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":4,"index":"test_eslogsdemo_index1","allocation_id":{"id":"F40hizJvRD-dnIOULEE-aA"}}],"0":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":0,"index":"test_eslogsdemo_index1","allocation_id":{"id":"ivnlugNmRn6d4VIQmxvHew"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":0,"index":"test_eslogsdemo_index1","allocation_id":{"id":"QnR3_ig9SqCYEzHNlsKQUA"}}]}},"res":{"shards":{"2":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":2,"index":"res","allocation_id":{"id":"cvxpWPL1RMSz9UwEm2vUgg"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":2,"index":"res","allocation_id":{"id":"7mv5oUi2TZ-sb8I-Tu83aA"}}],"3":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":3,"index":"res","allocation_id":{"id":"Q_0QGFxTRAuxC4cmUVPJlg"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":3,"index":"res","allocation_id":{"id":"duyQ2CBkSJy_VpVdmnipUA"}}],"1":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":1,"index":"res","allocation_id":{"id":"Izh1ZzFuQ8GnwfqKnHrYuw"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":1,"index":"res","allocation_id":{"id":"kH7zR-H5RZu75haoYJX1Bw"}}],"4":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":4,"index":"res","allocation_id":{"id":"1kD30uXOQPmJFwqYeOW8Ig"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":4,"index":"res","allocation_id":{"id":"PUyBSRr3TpalaLQZOUKUGQ"}}],"0":[{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":0,"index":"res","allocation_id":{"id":"DRX22nCoRxuz32LPe2bmLw"}},{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":0,"index":"res","allocation_id":{"id":"MKItLbBXToqzLnUR9a7Qgw"}}]}},"user":{"shards":{"2":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":2,"index":"user","allocation_id":{"id":"EUMCJQEMSS-ZunCOkj-0Bg"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":2,"index":"user","allocation_id":{"id":"nutVbcgpQNak2HFdwWuGcQ"}}],"3":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":3,"index":"user","allocation_id":{"id":"4IL1OvvaRS-t4gQr3bN-PQ"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":3,"index":"user","allocation_id":{"id":"A-9H07HSTOuPEk49xwkUIQ"}}],"1":[{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":1,"index":"user","allocation_id":{"id":"NQtAX8yTQh2lD1kQHIcYYA"}},{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":1,"index":"user","allocation_id":{"id":"rQ1p6vqOQwW0eXrw2BaKVA"}}],"4":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":4,"index":"user","allocation_id":{"id":"9NiM_-3DRV6N0_ty_WuEUA"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":4,"index":"user","allocation_id":{"id":"TqToRwAkTAOnKCoKZpG59g"}}],"0":[{"state":"STARTED","primary":true,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":0,"index":"user","allocation_id":{"id":"Qzwt2olURNS2HCVXpGRsAw"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":0,"index":"user","allocation_id":{"id":"Ee3WoHUTRFSP7WYxzZKKGg"}}]}},".elastichq":{"shards":{"2":[{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":2,"index":".elastichq","allocation_id":{"id":"vZxiopRNTe6Y0_AfkhzG_A"}},{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":2,"index":".elastichq","allocation_id":{"id":"GuWPLlSkS46XTNVgTFjAMA"}}],"3":[{"state":"STARTED","primary":false,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":3,"index":".elastichq","allocation_id":{"id":"1Oz9MY6tSaKdLBFiULmb6Q"}},{"state":"STARTED","primary":true,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":3,"index":".elastichq","allocation_id":{"id":"8vxkeoqfQ1O6WJEK2BIvlw"}}],"1":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":1,"index":".elastichq","allocation_id":{"id":"zmRNhq8qQCiT4mi-L0__BA"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":1,"index":".elastichq","allocation_id":{"id":"UAiMrJv9Se-zDjBJxx4ztQ"}}],"4":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":4,"index":".elastichq","allocation_id":{"id":"QknNgj2vQr-4KYXVJuke2A"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":4,"index":".elastichq","allocation_id":{"id":"AsE3sHeESxa6PWuUpcsVKw"}}],"0":[{"state":"STARTED","primary":true,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":0,"index":".elastichq","allocation_id":{"id":"hkVY5Z9AQL6bIbVqn7aamw"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":0,"index":".elastichq","allocation_id":{"id":"I1EsMqsrT6GdznSLg8ZelA"}}]}},"system":{"shards":{"2":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":2,"index":"system","allocation_id":{"id":"EtmRnX4RR4eqjXtykZH3wg"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":2,"index":"system","allocation_id":{"id":"qtmt37DZSfewu3OwO5eFbA"}}],"3":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":3,"index":"system","allocation_id":{"id":"idZQhjMxS5KyKz6iS6hcZQ"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":3,"index":"system","allocation_id":{"id":"Uzp3EKBgRbm0m2xQdJcXcA"}}],"1":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":1,"index":"system","allocation_id":{"id":"0Dp7wW1OQP2YHeN0cB6N2Q"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":1,"index":"system","allocation_id":{"id":"FjHdA1AVSDyuJFeS6BC6UQ"}}],"4":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":4,"index":"system","allocation_id":{"id":"uk5yv0k0Ql-nYOB4Oawmpw"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":4,"index":"system","allocation_id":{"id":"4auNvScMRSeiFxrVtB9AVg"}}],"0":[{"state":"STARTED","primary":true,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":0,"index":"system","allocation_id":{"id":"V20R1M25T9eG0XMoAFKWNQ"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":0,"index":"system","allocation_id":{"id":"kJ29T9kdSxWdF8V6QmU3gQ"}}]}}}},"routing_nodes":{"unassigned":[],"nodes":{"wgvUHm1mTvSsKnHXzLO9Jw":[{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":3,"index":"admin","allocation_id":{"id":"sLWxuI75SjCN4VA8ZLhwpw"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":1,"index":"admin","allocation_id":{"id":"3UN0Tvr2SzGxCqLt-X22Fg"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":4,"index":"admin","allocation_id":{"id":"EcQ57ECWQOig2unnejzaPQ"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":2,"index":"test_eslogsdemo_index1","allocation_id":{"id":"oWRP7mQ8TziqR58gVPPTmA"}},{"state":"STARTED","primary":false,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":1,"index":"test_eslogsdemo_index1","allocation_id":{"id":"Dl2OWwrzToegRD7ulPnApg"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":0,"index":"test_eslogsdemo_index1","allocation_id":{"id":"ivnlugNmRn6d4VIQmxvHew"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":2,"index":"res","allocation_id":{"id":"cvxpWPL1RMSz9UwEm2vUgg"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":3,"index":"res","allocation_id":{"id":"Q_0QGFxTRAuxC4cmUVPJlg"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":1,"index":"res","allocation_id":{"id":"Izh1ZzFuQ8GnwfqKnHrYuw"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":4,"index":"res","allocation_id":{"id":"1kD30uXOQPmJFwqYeOW8Ig"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":2,"index":"user","allocation_id":{"id":"EUMCJQEMSS-ZunCOkj-0Bg"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":3,"index":"user","allocation_id":{"id":"4IL1OvvaRS-t4gQr3bN-PQ"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":4,"index":"user","allocation_id":{"id":"9NiM_-3DRV6N0_ty_WuEUA"}},{"state":"STARTED","primary":false,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":3,"index":".elastichq","allocation_id":{"id":"1Oz9MY6tSaKdLBFiULmb6Q"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":1,"index":".elastichq","allocation_id":{"id":"zmRNhq8qQCiT4mi-L0__BA"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":4,"index":".elastichq","allocation_id":{"id":"QknNgj2vQr-4KYXVJuke2A"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":2,"index":"system","allocation_id":{"id":"EtmRnX4RR4eqjXtykZH3wg"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":3,"index":"system","allocation_id":{"id":"idZQhjMxS5KyKz6iS6hcZQ"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":1,"index":"system","allocation_id":{"id":"0Dp7wW1OQP2YHeN0cB6N2Q"}},{"state":"STARTED","primary":true,"node":"wgvUHm1mTvSsKnHXzLO9Jw","relocating_node":null,"shard":4,"index":"system","allocation_id":{"id":"uk5yv0k0Ql-nYOB4Oawmpw"}}],"C2C5BLVTQnuxKuiVbjstzg":[{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":2,"index":"admin","allocation_id":{"id":"JKatzopuQA2xGEEd2n3pEQ"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":4,"index":"admin","allocation_id":{"id":"cAwPEU83QtiEJV_SaDVHtQ"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":0,"index":"admin","allocation_id":{"id":"SakRRTBKTZejGlneB89Y5g"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":2,"index":"test_eslogsdemo_index1","allocation_id":{"id":"KJ4sKrYbRuyA5SSwMk9AkA"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":3,"index":"test_eslogsdemo_index1","allocation_id":{"id":"vIsIAWxFSNi1-RgpdBE9hw"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":4,"index":"test_eslogsdemo_index1","allocation_id":{"id":"pbO2XI5-Tyy-tJz0bkkfxw"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":0,"index":"test_eslogsdemo_index1","allocation_id":{"id":"QnR3_ig9SqCYEzHNlsKQUA"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":2,"index":"res","allocation_id":{"id":"7mv5oUi2TZ-sb8I-Tu83aA"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":4,"index":"res","allocation_id":{"id":"PUyBSRr3TpalaLQZOUKUGQ"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":0,"index":"res","allocation_id":{"id":"DRX22nCoRxuz32LPe2bmLw"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":3,"index":"user","allocation_id":{"id":"A-9H07HSTOuPEk49xwkUIQ"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":1,"index":"user","allocation_id":{"id":"NQtAX8yTQh2lD1kQHIcYYA"}},{"state":"STARTED","primary":true,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":0,"index":"user","allocation_id":{"id":"Qzwt2olURNS2HCVXpGRsAw"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":2,"index":".elastichq","allocation_id":{"id":"vZxiopRNTe6Y0_AfkhzG_A"}},{"state":"STARTED","primary":true,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":3,"index":".elastichq","allocation_id":{"id":"8vxkeoqfQ1O6WJEK2BIvlw"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":1,"index":".elastichq","allocation_id":{"id":"UAiMrJv9Se-zDjBJxx4ztQ"}},{"state":"STARTED","primary":true,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":0,"index":".elastichq","allocation_id":{"id":"hkVY5Z9AQL6bIbVqn7aamw"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":3,"index":"system","allocation_id":{"id":"Uzp3EKBgRbm0m2xQdJcXcA"}},{"state":"STARTED","primary":false,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":1,"index":"system","allocation_id":{"id":"FjHdA1AVSDyuJFeS6BC6UQ"}},{"state":"STARTED","primary":true,"node":"C2C5BLVTQnuxKuiVbjstzg","relocating_node":null,"shard":0,"index":"system","allocation_id":{"id":"V20R1M25T9eG0XMoAFKWNQ"}}],"V9fffC08SYiT8V3iil7kMQ":[{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":2,"index":"admin","allocation_id":{"id":"Dgi8s7WxSz2oA4CUKYpkIw"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":3,"index":"admin","allocation_id":{"id":"Os8GyhUMSAyrpq8pQDnZ6A"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":1,"index":"admin","allocation_id":{"id":"xrXSYdvhSt-N4AR3CdNcgw"}},{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":0,"index":"admin","allocation_id":{"id":"5qKqLvrqQj-DwjJkhFZT2w"}},{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":3,"index":"test_eslogsdemo_index1","allocation_id":{"id":"E3y_G5InRauyOANbwpbG1g"}},{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":1,"index":"test_eslogsdemo_index1","allocation_id":{"id":"pDxGQ2BEQlyUabSl-qzytA"}},{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":4,"index":"test_eslogsdemo_index1","allocation_id":{"id":"F40hizJvRD-dnIOULEE-aA"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":3,"index":"res","allocation_id":{"id":"duyQ2CBkSJy_VpVdmnipUA"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":1,"index":"res","allocation_id":{"id":"kH7zR-H5RZu75haoYJX1Bw"}},{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":0,"index":"res","allocation_id":{"id":"MKItLbBXToqzLnUR9a7Qgw"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":2,"index":"user","allocation_id":{"id":"nutVbcgpQNak2HFdwWuGcQ"}},{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":1,"index":"user","allocation_id":{"id":"rQ1p6vqOQwW0eXrw2BaKVA"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":4,"index":"user","allocation_id":{"id":"TqToRwAkTAOnKCoKZpG59g"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":0,"index":"user","allocation_id":{"id":"Ee3WoHUTRFSP7WYxzZKKGg"}},{"state":"STARTED","primary":true,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":2,"index":".elastichq","allocation_id":{"id":"GuWPLlSkS46XTNVgTFjAMA"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":4,"index":".elastichq","allocation_id":{"id":"AsE3sHeESxa6PWuUpcsVKw"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":0,"index":".elastichq","allocation_id":{"id":"I1EsMqsrT6GdznSLg8ZelA"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":2,"index":"system","allocation_id":{"id":"qtmt37DZSfewu3OwO5eFbA"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":4,"index":"system","allocation_id":{"id":"4auNvScMRSeiFxrVtB9AVg"}},{"state":"STARTED","primary":false,"node":"V9fffC08SYiT8V3iil7kMQ","relocating_node":null,"shard":0,"index":"system","allocation_id":{"id":"kJ29T9kdSxWdF8V6QmU3gQ"}}]}},"restore":{"snapshots":[]},"snapshots":{"snapshots":[]},"snapshot_deletions":{"snapshot_deletions":[]}}],"response_time":114,"status_code":200,"message":"OK"}
     */
    @GetMapping("/state")
    fun state(): ApiResponse {
        return urlGet("GET", "/_cluster/state")
    }

    /**
     * @api {GET} /api/cluster/statsNodes/{nodes} 4_节点状态
     * @apiGroup cluster
     * @apiVersion 1.0.0
     * @apiDescription 节点状态
     * @apiParam {String} nodeId 节点id
     * @apiParamExample {String} 请求样例：
     * /api/cluster/statsNodes/V9fffC08SYiT8V3iil7kMQ
     * @apiSuccess {ApiResponse} apiResponse Json格式返回响应结果
     * @apiSuccessExample {json} 返回样例:
     * {"data":[{"_nodes":{"total":1,"successful":1,"failed":0},"cluster_name":"eslogs","timestamp":1527143310791,"status":"green","indices":{"count":6,"shards":{"total":20,"primaries":8,"replication":1.5,"index":{"shards":{"min":3,"max":4,"avg":3.3333333333333335},"primaries":{"min":0,"max":3,"avg":1.3333333333333333},"replication":{"min":0.0,"max":3.0,"avg":1.3333333333333333}}},"docs":{"count":11126848,"deleted":37769},"store":{"size_in_bytes":9170587459},"fielddata":{"memory_size_in_bytes":0,"evictions":0},"query_cache":{"memory_size_in_bytes":0,"total_count":291,"hit_count":0,"miss_count":291,"cache_size":0,"cache_count":0,"evictions":0},"completion":{"size_in_bytes":0},"segments":{"count":126,"memory_in_bytes":19424798,"terms_memory_in_bytes":15239897,"stored_fields_memory_in_bytes":3301800,"term_vectors_memory_in_bytes":0,"norms_memory_in_bytes":125440,"points_memory_in_bytes":368297,"doc_values_memory_in_bytes":389364,"index_writer_memory_in_bytes":0,"version_map_memory_in_bytes":0,"fixed_bit_set_memory_in_bytes":0,"max_unsafe_auto_id_timestamp":1526281760973,"file_sizes":{}}},"nodes":{"count":{"total":1,"data":1,"coordinating_only":0,"master":1,"ingest":1},"versions":["6.2.4"],"os":{"available_processors":4,"allocated_processors":4,"names":[{"name":"Linux","count":1}],"mem":{"total_in_bytes":8254160896,"free_in_bytes":151031808,"used_in_bytes":8103129088,"free_percent":2,"used_percent":98}},"process":{"cpu":{"percent":0},"open_file_descriptors":{"min":265,"max":265,"avg":265}},"jvm":{"max_uptime_in_millis":1136732675,"versions":[{"version":"1.8.0_172","vm_name":"Java HotSpot(TM) 64-Bit Server VM","vm_version":"25.172-b11","vm_vendor":"Oracle Corporation","count":1}],"mem":{"heap_used_in_bytes":1415721072,"heap_max_in_bytes":4260102144},"threads":60},"fs":{"total_in_bytes":37912903680,"free_in_bytes":25194274816,"available_in_bytes":23261593600},"plugins":[],"network_types":{"transport_types":{"netty4":1},"http_types":{"netty4":1}}}}],"response_time":61,"status_code":200,"message":"OK"}
     */
    @GetMapping("/statsNodes/{nodeId}")
    fun statsNodes(@PathVariable nodeId: String): ApiResponse {
        return urlGet("GET", "/_cluster/stats/nodes/" + nodeId)
    }

    /**
     * @api {GET} /api/cluster/pendingClusterTasks 5_执行中的任务
     * @apiGroup cluster
     * @apiVersion 1.0.0
     * @apiDescription 执行中的任务
     * @apiSuccess {ApiResponse} apiResponse Json格式返回响应结果
     * @apiSuccessExample {json} 返回样例:
     * {"data":[{"tasks":[]}],"response_time":62,"status_code":200,"message":"OK"}
     */
    @GetMapping("/pendingClusterTasks")
    fun pendingClusterTasks(): ApiResponse {
        return urlGet("GET", "/_cluster/pending_tasks")
    }

    /**
     * @api {GET} /api/cluster/settings 6_获取集群设置
     * @apiGroup cluster
     * @apiVersion 1.0.0
     * @apiDescription 获取集群设置
     * @apiSuccess {ApiResponse} apiResponse Json格式返回响应结果
     * @apiSuccessExample {json} 返回样例:
     * {"data":[{"persistent":{},"transient":{"cluster":{"routing":{"allocation":{"enable":"all"}}}}}],"response_time":60,"status_code":200,"message":"OK"}
     */
    @GetMapping("/settings")
    fun settings(): ApiResponse {
        return urlGet("GET", "/_cluster/settings")
    }

    /**
     * @api {PUT} /api/cluster/putSettings 7_更新集群设置
     * @apiGroup cluster
     * @apiVersion 1.0.0
     * @apiDescription 更新集群设置
     * @apiSuccess {ApiResponse} apiResponse Json格式返回响应结果
     * @apiSuccessExample {json} 返回样例:
     * {"data":[{"persistent":{},"transient":{"cluster":{"routing":{"allocation":{"enable":"all"}}}}}],"response_time":60,"status_code":200,"message":"OK"}
     */
    @PutMapping("/putSettings")
    fun putSettings(flat_settings: Boolean?, match: String): ApiResponse {
        val uSettings: ClusterUpdateSettingsRequest = ClusterUpdateSettingsRequest()
        return ApiResponse(null)
    }
}
